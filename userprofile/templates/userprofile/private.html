{% extends "base.html" %}
{% load i18n %}
{% block title %}{% blocktrans %}{{ user }}'s Dashboard{% endblocktrans %}{% endblock %}
{% block customjs %}
<script type="text/javascript" src="{{ MEDIA_URL }}js/ui.datepicker.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/jquery.profile.js"></script>
<!--<script type="text/javascript" src="{{ MEDIA_URL }}js/jquery.simplemodal-1.1.1.pack.js"></script>-->
<script type="text/javascript" src="{{ MEDIA_URL }}js/jquery.checkbox.min.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/jquery.checkboxes.pack.js"></script>
<link rel="stylesheet" href="{{ MEDIA_URL }}css/ui.datepicker.css" type="text/css" />
{% ifequal LANGUAGE_CODE 'es' %}
<script type="text/javascript" src="{{ MEDIA_URL }}js/ui.datepicker-{{ LANGUAGE_CODE }}.js"></script>
<script type="text/javascript">
	$(function() {
		$.datepicker.setDefaults($.datepicker.regional["{{ LANGUAGE_CODE }}"]);
	});
</script>
{% endifequal %}
<link rel="stylesheet" href="{{ MEDIA_URL }}css/jquery.checkbox.css" type="text/css" />
<script type="text/javascript">
	$(function() {
		$("input[type=checkbox]").checkbox();
	});
</script>
{% endblock %}

{% block content %}
{% load userprofile_tags %}
<h1>{% trans "Tell others something about you" %}</h1>
<form class="commonform profile" action="" method="post" enctype="multipart/form-data">
  <fieldset>
		<div class="save">
			<img style="float: right;" class="saving" src="{{ MEDIA_URL }}images/loading2.gif" />
   		<input type="button" class="save" value="{% trans 'Save' %}" />
		</div>
		<div style="float: left; width: 100px;">{%  trans "Make it public" %}</div>
		<div>
			<div style="float: left;"><input type="checkbox" name="nickname_public" {% if profile.visible.nickname or not profile.visible %}checked="on"{% endif %}/></div>
    	<label for="id_username">{% trans "Nickname:" %}</label>
    	<strong id="id_username">{{ profile.user }}</strong> 
		</div>
		<div>
			<div style="float: left;"><input type="checkbox" name="email_public" {% if profile.visible.email %}checked="on"{% endif %}/></div>
    	<label for="id_email">{% trans "E-mail:" %}</label>
    	<strong id="id_email">{{ profile.email }}</strong> 
		</div>
		<div>
			<div style="float: left;"><input type="checkbox" name="avatar_public" {% if profile.visible.avatar or not profile.visible %}checked="on"{% endif %} /></div>
   		<label for="id_avatar">{% trans "Avatar:" %}</label>
			<div class="avatar">
				<a class="newavatar img" href="/profile/avatar/choose/">
     			<img id="avatarimg" src="{% if profile.avatar %}{{ profile.get_avatar96_url}}{% else %}{{ MEDIA_URL}}images/default.96.png{% endif %}" />
				</a>
   			<a class="newavatar" href="/profile/avatar/choose/">{% trans "Change" %}</a> <a class="delavatar" href="/profile/avatar/delete">{% trans "Delete" %}</a>
			</div>
		</div>
		<hr />
		<div style="float: left; width: 100px;">{%  trans "Make it public" %}</div>
		<div>
			<div style="float: left;"><input type="checkbox" name="firstname_public" {% if profile.visible.firstname %}checked="on"{% endif %}/></div>
    	<label for="id_firstname">{% trans "First Name:" %}</label>
    	{{ form.firstname }}
		</div>
		<div>
			<div style="float: left;"><input type="checkbox" name="surname_public" {% if profile.visible.surname %}checked="on"{% endif %}/></div>
    	<label for="id_surname">{% trans "Surname:" %}</label>
    	{{ form.surname }}
		</div>
		<div>
			<div style="float: left;"><input type="checkbox" name="gender_public" {% if profile.visible.gender %}checked="on"{% endif %}/></div>
    	<label for="id_gender">{% trans "Gender:" %}</label>
			<a class="male" href="{{ request.path }}">{% trans "Male" %}</a>
			<a class="female" href="{{ request.path }}">{% trans "Female" %}</a>
		</div>
		<div>
			<div style="float: left;"><input type="checkbox" name="birthdate_public" {% if profile.visible.birthdate %}checked="on"{% endif %}/></div>
   		<label for="id_birthdate">{% trans "Birth date:" %}</label>
			<div class="calendar"></div>
		</div>
		<hr />
		<div style="float: left; width: 100px;">{%  trans "Make it public" %}</div>
		<div>
			<div style="float: left;"><input type="checkbox" name="url_public" {% if profile.visible.url %}checked="on"{% endif %} /></div>
    	<label for="id_url">{% trans "Url:" %}</label>
    	{{ form.url }}
		</div>
		<div>
			<div style="float: left;"><input type="checkbox" name="about_public" {% if profile.visible.about %}checked="on"{% endif %} /></div>
    	<label for="id_about">{% trans "About:" %}</label>
    	{{ form.about }}
		</div>
		<hr />
		<div style="float: left; width: 100px;">{%  trans "Make it public" %}</div>
		<div>
			<div style="float: left;"><input type="checkbox" name="country_public" {% if profile.visible.country %}checked="on"{% endif %} /></div>
   		<label for="id_country">{% trans "Country:" %}</label>
			<select name="country" id="id_country">
				<option value="">{% trans "Not set" %}</option>
				<option value="" disabled="disabled">{% trans "More common..." %}</option>
				<option value="{{ spain.key }}">{% trans "Spain" %}</option>
				{% for continent,countries in country_data.items %}
					<option value="" disabled="disabled">{{ continent }}</option>
					{% for country in countries %}
					<option value="{{ country.key }}" {% ifequal profile.country.name country.name %}selected="selected"{% endifequal %}>{{ country }}</option>
					{% endfor %}
				{% endfor %}
			</select>
			<img class="loading" src="{{ MEDIA_URL }}images/loading.gif" />
		</div>
		<div class="mapinfo">
			<div style="float: left;"><input type="checkbox" name="location_public" {% if profile.visible.location %}checked="on"{% endif %} /></div>
   		<label for="id_location">{% trans "Location:" %}</label>
			<input style="width: 600px;" id="id_location" type="text" readonly="readonly" name="location" maxlength="255" value="{{ profile.location }}" /> 
		</div>
		<div class="mapinfo">
			<div style="float: left;"><input type="checkbox" name="geopoint_public" {% if profile.visible.geopoint %}checked="on"{% endif %} /></div>
   		<label for="id_position">{% trans "Position:" %}</label>
			<div id="map"></div>
		</div>
		<hr />
		<div>
    	<label for="id_other">{% trans "Other actions:" %}</label>
    	<strong><a href="/profile/delete">{% trans "Delete all my personal information" %}</a></strong>
		</div>
    <div style="display: none;">{{ form.birthdate }}{{ form.latitude }}{{ form.longitude }}{{ form.gender }}</div>
		<div class="save">
   		<input type="button" style="float: right;" class="save" value="{% trans 'Save' %}" /><img style="float: left;" class="saving" src="{{ MEDIA_URL }}images/loading2.gif" />
		</div>
  </fieldset>
</form>
<div style="display: none;" id="apikey">{{ APIKEY }}</div>
{% endblock %}
